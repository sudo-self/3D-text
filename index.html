<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Text to 3D Model Generator</title>
<link rel="icon" href="/favicon.ico" sizes="any">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
<meta name="author" content="sudo-self" />

<script src="https://cdn.tailwindcss.com"></script>
<style>
@keyframes gradient-x {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}
.animate-gradient-x {
  background-size: 200% 200%;
  animation: gradient-x 4s ease infinite;
}
.text-glow {
  text-shadow: 0 0 10px rgba(255,255,255,0.3), 0 0 20px rgba(255,255,255,0.2);
}
</style>
</head>

<body class="bg-gradient-to-br from-black via-gray-500 to-gray-900 min-h-screen flex flex-col items-center justify-start py-10 text-gray-800">

<div class="w-full max-w-5xl px-4">

  <!-- Header -->
  <header class="text-center mb-10">
    <h1 class="text-7xl font-extrabold mb-4 bg-gradient-to-r from-indigo-300 via-pink-300 to-yellow-300 bg-clip-text text-transparent animate-gradient-x text-glow">
      Text to GLB
    </h1>
    <p class="text-lg text-cyan-300 hover:text-white">
      <a href="https://text-to-glb.vercel.app">text-to-glb.vercel.app</a>
    </p>
  </header>

  <!-- Controls -->
  <section class="bg-white rounded-3xl shadow-2xl p-8 mb-10">
    <div class="grid gap-6">

      <!-- Text Input -->
      <div>
        <label for="textInput" class="block mb-2 font-semibold text-gray-700">Enter Text</label>
        <input type="text" id="textInput" value="text-to-glb" placeholder="Type your text here..." class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-400 transition">
      </div>

      <!-- Text Color -->
      <div>
        <label for="textColor" class="block mb-2 font-semibold text-gray-700">Text Color</label>
        <input type="color" id="textColor" value="#667eea" class="w-20 h-10 p-0 border-0 rounded-lg cursor-pointer">
      </div>

      <!-- Texture Upload -->
      <div>
        <label for="textureInput" class="block mb-2 font-semibold text-gray-700">Optional Texture Image Upload</label>
        <input type="file" id="textureInput" accept="image/*" class="w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-400 transition">
        <img id="texturePreview" class="mt-2 w-24 h-24 object-cover rounded border border-gray-300 hidden">
      </div>

      <!-- Texture Prompt -->
      <div>
        <label for="texturePrompt" class="block mb-2 font-semibold text-gray-700">Optional Texture Prompt (AI-generated)</label>
        <input type="text" id="texturePrompt" placeholder="e.g., metallic rainbow, marble, sci-fi" class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-400 transition">
        <button id="generateTextureBtn" class="mt-2 bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded-lg transition">
          Generate Texture from Prompt
        </button>
      </div>

      <!-- Font Style -->
      <div>
        <label for="fontStyle" class="block mb-2 font-semibold text-gray-700">Font Style</label>
        <select id="fontStyle" class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-400 transition">
          <option value="helvetiker">Helvetiker</option>
          <option value="optimer">Optimer</option>
          <option value="gentilis">Gentilis</option>
          <option value="droid_sans">Droid Sans</option>
        </select>
      </div>

      <!-- Metalness -->
      <div>
        <label for="metalness" class="block mb-2 font-semibold text-gray-700">Metalness <span id="metalValue">0.50</span></label>
        <input type="range" id="metalness" min="0" max="1" step="0.01" value="0.5" class="w-full h-2 bg-gray-300 rounded-lg">
      </div>

      <!-- Roughness -->
      <div>
        <label for="roughness" class="block mb-2 font-semibold text-gray-700">Roughness <span id="roughValue">0.50</span></label>
        <input type="range" id="roughness" min="0" max="1" step="0.01" value="0.5" class="w-full h-2 bg-gray-300 rounded-lg">
      </div>

      <!-- Depth -->
      <div>
        <label for="depth" class="block mb-2 font-semibold text-gray-700">Depth <span id="depthValue">0.50</span></label>
        <input type="range" id="depth" min="0.1" max="2" step="0.1" value="0.5" class="w-full h-2 bg-gray-300 rounded-lg cursor-pointer">
      </div>

      <!-- Generate Text Button -->
      <button id="generateBtn" class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 rounded-lg transition">
        Create 3D Text
      </button>

    </div>
  </section>

  <!-- Loading -->
  <div id="loading" class="text-white text-center text-lg mb-6 hidden">Generating 3D model...</div>

  <!-- 3D Canvas -->
  <section class="bg-white rounded-2xl shadow-2xl overflow-hidden mb-10 w-full h-[400px]">
    <div id="renderCanvas" class="w-full h-full"></div>
  </section>

  <!-- Download -->
  <div class="text-center">
    <button id="downloadBtn" disabled class="bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-6 rounded-lg">
      Download
    </button>
  </div>

</div>

<!-- Three.js -->
<script src="https://cdn.jsdelivr.net/npm/three@0.132.2/build/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.132.2/examples/js/controls/OrbitControls.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.132.2/examples/js/loaders/FontLoader.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.132.2/examples/js/exporters/GLTFExporter.js"></script>

<script src="app.js"></script>
<script src="./script.js"></script>

<script>
let userTexture = null;

// Update sliders dynamically
const sliders = [
  {id:'metalness', span:'metalValue'},
  {id:'roughness', span:'roughValue'},
  {id:'depth', span:'depthValue'}
];
sliders.forEach(s => {
  const slider = document.getElementById(s.id);
  const label = document.getElementById(s.span);
  slider.addEventListener('input', () => label.textContent = parseFloat(slider.value).toFixed(2));
});

// Texture preview on file upload
const textureInput = document.getElementById('textureInput');
const texturePreview = document.getElementById('texturePreview');
textureInput.addEventListener('change', e => {
  const file = e.target.files[0];
  if (!file) return;
  const reader = new FileReader();
  reader.onload = function(event) {
    texturePreview.src = event.target.result;
    texturePreview.classList.remove('hidden');
    userTexture = new THREE.TextureLoader().load(event.target.result);
  };
  reader.readAsDataURL(file);
});

// Generate texture from prompt
const generateTextureBtn = document.getElementById('generateTextureBtn');
const texturePromptInput = document.getElementById('texturePrompt');

generateTextureBtn.addEventListener('click', async () => {
  const prompt = texturePromptInput.value.trim();
  if (!prompt) return alert("Enter a prompt for texture generation!");

  document.getElementById("loading").classList.remove("hidden");

  try {
    const res = await fetch(`https://text-to-image.jessejesse.workers.dev/?prompt=${encodeURIComponent(prompt)}`);
    if (!res.ok) throw new Error("Texture generation failed");
    const blob = await res.blob();
    const url = URL.createObjectURL(blob);
    texturePreview.src = url;
    texturePreview.classList.remove('hidden');
    userTexture = new THREE.TextureLoader().load(url);
  } catch (err) {
    console.error(err);
    alert("Failed to generate texture. Check console.");
  } finally {
    document.getElementById("loading").classList.add("hidden");
  }
});
</script>

</body>
</html>








